<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candidates</title>
    <!--STYLESHEET-->
    <!--=================================================-->
    <!--Roboto Slab Font [ OPTIONAL ] -->
    <link href="http://fonts.googleapis.com/css?family=Roboto+Slab:400,300,100,700" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Roboto:500,400italic,100,700italic,300,700,500italic,400" rel="stylesheet">
    <!--Bootstrap Stylesheet [ REQUIRED ]-->
    <link href="../../assets/css/bootstrap.min.css" rel="stylesheet">
    <!--Jasmine Stylesheet [ REQUIRED ]-->
    <link href="../../assets/css/style.css" rel="stylesheet">
    <!--Font Awesome [ OPTIONAL ]-->
    <link href="../../assets/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <!--Switchery [ OPTIONAL ]-->
    <link href="../../assets/plugins/switchery/switchery.min.css" rel="stylesheet">
    <!--Bootstrap Select [ OPTIONAL ]-->
    <link href="../../assets/plugins/bootstrap-select/bootstrap-select.min.css" rel="stylesheet">
    <!--Bootstrap Table [ OPTIONAL ]-->
    <link href="../../assets/plugins/datatables/media/css/dataTables.bootstrap.css" rel="stylesheet">
    <link href="../../assets/plugins/datatables/extensions/Responsive/css/dataTables.responsive.css" rel="stylesheet">
    <!--Demo [ DEMONSTRATION ]-->
    <link href="../../assets/css/demo/jasmine.css" rel="stylesheet">
    <!--SCRIPT-->
    <!--=================================================-->
    <!--Page Load Progress Bar [ OPTIONAL ]-->
    <link href="../../assets/plugins/pace/pace.min.css" rel="stylesheet">
    <script src="../../assets/plugins/pace/pace.min.js"></script>
  </head>
  <!--TIPS-->
  <!--You may remove all ID or Class names which contain "demo-", they are only used for demonstration. -->
  <body>
    <div id="container" class="effect mainnav-sm navbar-fixed mainnav-fixed">
      <!--NAVBAR-->
      <!--===================================================-->
      <header id="navbar">
        <div id="navbar-container" class="boxed">
          <!--Navbar Dropdown-->
          <!--================================-->
          <div class="navbar-content clearfix">
            <ul class="nav navbar-top-links pull-left">
              <!--Navigation toogle button-->
              <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
              <li class="tgl-menu-btn">
                <a class="mainnav-toggle" href="#">
                  <i class="fa fa-navicon fa-lg"></i>
                </a>
              </li>
              <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
              <!--End Navigation toogle button-->
            </ul>

            <ul class="nav navbar-top-links pull-right">
              <!--User dropdown-->
              <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
              <li id="dropdown-user" class="dropdown">
                <a
                  href="#"
                  data-toggle="dropdown"
                  class="dropdown-toggle text-right"
                >
                  <span class="pull-right">
                    <img
                      class="img-circle img-user media-object"
                      src="../../assets/img/av1.png"
                      alt="Profile Picture"
                    />
                  </span>
                  <div class="username hidden-xs">Admin</div>
                </a>
                <div class="dropdown-menu dropdown-menu-right with-arrow">
                  <!-- User dropdown menu -->
                  <ul class="head-list">
                    <li>
                      <a href="#">
                        <i class="fa fa-sign-out fa-fw"></i> Logout
                      </a>
                    </li>
                  </ul>
                </div>
              </li>
              <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
              <!--End user dropdown-->
            </ul>
          </div>
          <!--================================-->
          <!--End Navbar Dropdown-->
        </div>
      </header>
      <!--===================================================-->
      <!--END NAVBAR-->
      <div class="boxed">
        <!--CONTENT CONTAINER-->
        <!--===================================================-->
        <div id="content-container">
          <div class="pageheader hidden-xs">
            <h3><i class="fa fa-home"></i> Candidates</h3>
          </div>
          <!--Page content--> 
          <div class="row">
            <div class="col-md-12">
       <!-- Add Row -->
       <!--===================================================-->
       <div class="panel">
           <div id="demo-custom-toolbar2" class="table-toolbar-left">
               <a href="form.html" id="demo-dt-addrow-btn" class="btn btn-pink">Add Candidate</a>
           </div>
           <div class="panel-body">
               <table id="demo-dt-addrow" class="table table-striped table-bordered">
                   <thead>
                       <tr>
                           <th>Name</th>
                           <th>Position</th>
                           <th class="min-tablet">Department</th>
                       </tr>
                   </thead>
                   <tbody id="table-body">
                       <!-- <tr>
                           <td>Albert Richard</td>
                           <td>President</td>
                           <td>Civil</td>
                       </tr>
                       <tr>
                           <td>Daudi Jacob</td>
                           <td>President</td>
                           <td>Computer</td>
                       </tr>
                       <tr>
                           <td>Tesha	Douglas</td>
                           <td>President</td>
                           <td>Electrical</td>
                       </tr>
                       <tr>
                           <td>Daniel Lyimo</td>
                           <td>President</td>
                           <td>Computer</td>
                       </tr> -->
                   </tbody>
               </table>
           </div>
       </div>
       <!--===================================================-->
       <!-- End Add Row -->
   </div>

          <!--End page content-->
        </div>
        <!--===================================================-->
        <!--END CONTENT CONTAINER-->
        <!--MAIN NAVIGATION-->
        <!--===================================================-->
        <nav id="mainnav-container">
          <!--Brand logo & name-->
          <!--================================-->
          <div class="navbar-header">
            <a href="index.html" class="navbar-brand">
              <i class="fa fa-forumbee brand-icon"></i>
              <div class="brand-title">
                <span class="brand-text">SVS</span>
              </div>
            </a>
          </div>
          <!--================================-->
          <!--End brand logo & name-->
          <div id="mainnav">
            <!--Menu-->
            <!--================================-->
            <div id="mainnav-menu-wrap">
              <div class="nano">
                <div class="nano-content">
                  <ul id="mainnav-menu" class="list-group">
                    <!--Menu list item-->
                    <li>
                      <a href="../monitor/index.html">
                        <i class="fa fa-home"></i>
                        <span class="menu-title"> Dashboard </span>
                      </a>
                    </li>
                    <!--Menu list item-->
                    <li>
                      <a href="../candidates/candidates.html">
                        <i class="fa fa-user"></i>
                        <span class="menu-title">Candidates</span>
                      </a>
                    </li>
                    <!--Menu list item-->
                    <li>
                      <a href="../voters/voters.html">
                        <i class="fa fa-users"></i>
                        <span class="menu-title">Voters</span>
                      </a>
                    </li>
                    <!--Menu list item-->
                    <li>
                      <a href="../start/start-election.html">
                        <i class="fa fa-play"></i>
                        <span class="menu-title">Start Election</span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <!--================================-->
            <!--End menu-->
          </div>
        </nav>
        <!--===================================================-->
        <!--END MAIN NAVIGATION-->
      </div>
      <!-- FOOTER -->
      <!--===================================================-->
      <footer id="footer">
        <p class="pad-lft">&#0169; 2022 Nixon Mkindi</p>
      </footer>
      <!--===================================================-->
      <!-- END FOOTER -->
      <!-- SCROLL TOP BUTTON -->
      <!--===================================================-->
      <button id="scroll-top" class="btn">
        <i class="fa fa-chevron-up"></i>
      </button>
      <!--===================================================-->
    </div>
    <!--===================================================-->
    <!-- END OF CONTAINER -->
    <!--JAVASCRIPT-->
    <!--=================================================-->
    <!--jQuery [ REQUIRED ]-->
    <script src="../../assets/js/jquery-2.1.1.min.js"></script>
    <script type="text/javascript">
      //TODO change this!
      var candidates = [];
      let requestURL = "http://localhost:3000/candidates";
      let request = new XMLHttpRequest();
      request.open("GET", requestURL);
      request.responseType = "json";
      request.send();
      request.onload = function () {
          let candidates = request.response;
          department_contract = {};
          for (var k in candidates) {

            // var elmtTable = document.getElementById("demo-dt-addrow");
            // var tableRows = elmtTable.getElementsByTagName("tr");
            // var rowCount = tableRows.length;

            // for (var x = rowCount - 1; x > 0; x--) {
            //     elmtTable.removeChild(tableRows[x]);
            // }

              const candidateName = candidates[k].name;
              const candidatePosition = candidates[k].position;
              const candidateDepartment = candidates[k].department;
              //const votes = BallotContract.getVoteCount().call(candidate);

              const rowElem = document.createElement("tr");

              // Creates a cell element for the name.
              const nameCell = document.createElement("td");
              nameCell.innerText = candidateName;

              const positionCell = document.createElement("td");
              positionCell.innerText = candidatePosition;
              const departmentCell = document.createElement("td");
              departmentCell.innerText = candidateDepartment;

              rowElem.appendChild(nameCell);
              rowElem.appendChild(positionCell);
              rowElem.appendChild(departmentCell);
              console.log(`${candidates[k].name} ${candidates[k].position} ${candidates[k].department}`);

              // Adds the new row to the voting table.
              const tableElem = document.getElementById("demo-dt-addrow");
              const tableBody = document.getElementById("table-body");
              // console.log(tableElem)
              tableBody.appendChild(rowElem)
              tableElem.appendChild(tableBody);
          }
      };
    </script>
    <!--BootstrapJS [ RECOMMENDED ]-->
    <script src="../../assets/js/bootstrap.min.js"></script>
    <!--Fast Click [ OPTIONAL ]-->
    <script src="../../assets/plugins/fast-click/fastclick.min.js"></script>
    <!--Jasmine Admin [ RECOMMENDED ]-->
    <script src="../../assets/js/scripts.js"></script>
    <!--Jquery Nano Scroller js [ REQUIRED ]-->
    <script src="../../assets/plugins/nanoscrollerjs/jquery.nanoscroller.min.js"></script>
    <!--Metismenu js [ REQUIRED ]-->
    <script src="../../assets/plugins/metismenu/metismenu.min.js"></script>
    <!--Switchery [ OPTIONAL ]-->
    <script src="../../assets/plugins/switchery/switchery.min.js"></script>
    <!--Bootstrap Select [ OPTIONAL ]-->
    <script src="../../assets/plugins/bootstrap-select/bootstrap-select.min.js"></script>
    <!--DataTables [ OPTIONAL ]-->
    <script src="../../assets/plugins/datatables/media/js/jquery.dataTables.js"></script>
    <script src="../../assets/plugins/datatables/media/js/dataTables.bootstrap.js"></script>
    <script src="../../assets/plugins/datatables/extensions/Responsive/js/dataTables.responsive.min.js"></script>
    <!--Fullscreen jQuery [ OPTIONAL ]-->
    <script src="../../assets/plugins/screenfull/screenfull.js"></script>
    <!--DataTables Sample [ SAMPLE ]-->
    <script src="../../assets/js/demo/tables-datatables.js"></script>
  </body>
</html>
